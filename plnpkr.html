<head>
  <title>Plng Pkr</title>
</head>

<body>
	<div class="container">
		<header>
			<h1>Planning Pucker {{> loginButtons}}</h1>
		</header>

		{{#if currentUser}}
			{{#if currentPlay}}
				<h2>Play ID: {{currentPlay}}</h2>
				{{> taskVoting}}
				{{> taskList}}
			{{else}}
				{{> playControl}}
			{{/if}}
		{{/if}}
	
	</div>
</body>

<template name="playControl">
	<div>
		<form class="join-session">
			<input type="text" name="text" placeholder="Paste session ID"/>
		</form>
		<form>
			<button class="new-session">Create new session</button>
			<button class="list-sessions">List finished sessions</button>
		</form>
	</div>
</template>

<template name="taskVoting">
	{{#if noTask}}
    <h2>Create new task</h2>
    <form class="new-task">
      <input type="text" name="text" placeholder="Type to add new tasks" />
    </form>

  {{else}}
    <h2>Vote here</h2>
    <div>
    	{{#with currentTask}}
    		{{text}}
    	{{/with}}
    </div>
    <!-- <form class="vote-task"> -->
      <button value="0" class="vote-button">0</button>
      <button value="0.5" class="vote-button">1/2</button>
      <button value="1" class="vote-button">1</button>
      <button value="2" class="vote-button">2</button>
      <button value="3" class="vote-button">3</button>
      <button value="5" class="vote-button">5</button>
      <button value="8" class="vote-button">8</button>
      <button value="13" class="vote-button">13</button>
      <button value="20" class="vote-button">20</button>
      <button value="999" class="vote-button">inf</button>
      <button value="-1" class="vote-button">coffee</button>
      <input type="submit" value="Save" class="save-button"/>
    <!-- </form> -->
    {{/if}}

    {{> votingResults}}
</template>

<template name="votingResults">
	<h2>Current Vote</h2>
	{{#each votes}}
		<span>{{vote}}, </span>
	{{/each}}
</template>

<template name="taskList">
	<h2>Task List</h2>
  <ul>
    {{#each tasks}}
    	{{> task}}
    {{/each}}
  </ul>
</template>

<template name="task">
  <li class="{{#if checked}}checked{{/if}}">
    <span class="text">{{text}} {{voteStr}}</span>
  </li>
</template>

